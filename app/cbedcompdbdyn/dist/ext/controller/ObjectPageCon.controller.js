sap.ui.define(["sap/ui/core/mvc/ControllerExtension","sap/m/MessageToast","sap/ui/export/Spreadsheet","sap/ui/model/json/JSONModel","sap/ui/export/library"],function(e,t,a){"use strict";var s=a.EdmType;let n=true;return e.extend("cbedcompdbdyn.ext.controller.ObjectPageCon",{override:{onInit:function(){var e=this.base.getExtensionAPI().getModel();let t=this.base.getView().mAggregations.content[0].mAggregations.headerTitle;t.destroyActions()},routing:{onAfterBinding:async function(e){try{function ne(){var e=Math.floor(Math.random()*1e6);var t=(new Date).getTime();var a=t+"-"+e;return a}var a=e.sPath;var s=a.match(/'([^']+)'/);sap.ui.core.BusyIndicator.show();var n="";let le="cbeObjectPageData";let oe=this.base.getView().getModel().bindContext(`/${le}(...)`);oe.setParameter("projectId",s[1]);await oe.execute();let re=oe.getBoundContext().getValue();re=JSON.parse(re.value);console.log(re);var l=re[0][0];var o=re[1];var r=re[2];var i=re[3];var m=re[4];var d=re[5];var g=re[6];debugger;var p=this.getView().getContent()[0].getSections()[0].mAggregations._grid.getContent()[0].mAggregations._grid.getContent()[0].getContent();let ie=p.getItems()[0].getItems()[2].getItems()[0].getColumns();for(let ye=0;ye<ie.length;ye++){ie[ye].setStyleClass("custcolorclass")}p.getItems()[0].getItems()[0].getItems()[0].getItems()[0].getItems()[0].setVisible(false);p.getItems()[0].getItems()[0].getItems()[0].getItems()[1].getItems()[1].setText(`${" "+l[0]?.Project_Description??" "}`);p.getItems()[0].getItems()[0].getItems()[0].getItems()[1].getItems()[1].setTextAlign("End");p.getItems()[0].getItems()[0].getItems()[0].getItems()[2].getItems()[0].setVisible(false);var c=p.getItems()[0].getItems()[2].getItems()[0];var x=p.getItems()[0].getItems()[1].getItems()[0];if(!x.getItems()[1]){x.addItem(new sap.ui.core.Icon(`${"cylindricaldtaicon"+ne()}`,{src:"sap-icon://expand",color:"darkblue",hoverColor:"red",activeColor:"darkgreen",size:"12px",width:"20px",press:function(e){var t=p.getItems()[0];let a=sap.ui.getCore().byId("cbedcompdbdyn::Project_DetailsObjectPage--fe::CustomSubSection::Fragment--total_basic_pricing");let s;let n=sap.ui.getCore().byId("cbedcompdbdyn::Project_DetailsObjectPage--fe::CustomSubSection::Fragment--newItemID1");let l;if(t.getWidth()=="30%"){c.setFixedLayout(false);t.setWidth("80%");e.getSource().setSrc("sap-icon://collapse")}else{c.setFixedLayout(true);t.setWidth("30%");e.getSource().setSrc("sap-icon://expand")}let o=0;let r=c.getColumns();for(let e=0;e<r.length;e++){if(r[e].getVisible()==true){o++}}if(o<5){c.setFixedLayout(true)}}}))}c.destroyItems();const me=new Set;let de=[];o.forEach(e=>{if(!me.has(e.Item_Code)){me.add(e.Item_Code);de.push(e)}});let ge=o.sort((e,t)=>{if(e.Item_Code!==t.Item_Code){return e.Item_Code.localeCompare(t.Item_Code)}else if(e.Proposed_Vendor_Code!==t.Proposed_Vendor_Code){return e.Proposed_Vendor_Code.localeCompare(t.Proposed_Vendor_Code)}else{return e.PAN_Number.localeCompare(t.PAN_Number)}});let pe=ge.reduce((e,t)=>{let a=`${t.Item_Code}-${t.Proposed_Vendor_Code}-${t.PAN_Number}`;if(!e[a]){e[a]=[]}e[a].push(t);return e},{});console.log(pe);debugger;let ce="";let xe=0;for(let Te in pe){if(pe[Te].length>xe){xe=pe[Te].length;ce=Te}}let ue=pe[ce];let Ie=1;for(let Se=0;Se<de.length;Se++){c.addItem(new sap.m.ColumnListItem(`${"collistitem"+(Se+1)}`));let Pe=c.getItems()[Se];let Ve=new sap.m.Text(`${"itemdesc"+(Se+1)}`,{text:`${de[Se]?.Item_Short_Description??" "}`,tooltip:`${de[Se]?.Item_Short_Description??" "}`,wrapping:false});Pe.addCell(Ve);let Ne=new sap.m.Text(`${"tag_no"+(Se+1)}`,{text:`${de[Se]?.tag_no??" "}`,tooltip:`${de[Se]?.tag_no??" "}`,wrapping:false});Pe.addCell(Ne);let Be=new sap.m.Text(`${"types_of_vessel"+(Se+1)}`,{text:`${de[Se]?.types_of_vessel??" "}`,tooltip:`${de[Se]?.types_of_vessel??" "}`,wrapping:false});Pe.addCell(Be);let Le=new sap.m.Text(`${"capacity_each_in_cu_mtr"+(Se+1)}`,{text:`${de[Se]?.capactity_each??" "}`,tooltip:`${de[Se]?.capactity_each??" "}`,wrapping:false});Pe.addCell(Le);let Ae=new sap.m.Text(`${"dia_in_mm"+(Se+1)}`,{text:`${de[Se]?.dia??" "}`,tooltip:`${de[Se]?.dia??" "}`,wrapping:false});Pe.addCell(Ae);let De=new sap.m.Text(`${"tl_to_tl_len"+(Se+1)}`,{text:`${de[Se]?.tl_tl_len??" "}`,tooltip:`${de[Se]?.tl_tl_len??" "}`,wrapping:false});Pe.addCell(De);let Fe=new sap.m.Text(`${"moc"+(Se+1)}`,{text:`${de[Se]?.moc??" "}`,tooltip:`${de[Se]?.moc??" "}`,wrapping:false});Pe.addCell(Fe);let Oe=new sap.m.Text(`${"design_pressure_bar"+(Se+1)}`,{text:`${de[Se]?.design_pb??" "}`,tooltip:`${de[Se]?.design_pb??" "}`,wrapping:false});Pe.addCell(Oe);let je=new sap.m.Text(`${"weights_in_kg"+(Se+1)}`,{text:`${de[Se]?.weights??" "}`,tooltip:`${de[Se]?.weights??" "}`,wrapping:false});Pe.addCell(je);let ke=new sap.m.Text(`${"uom"+(Se+1)}`,{text:`${de[Se]?.UOM??" "}`,tooltip:`${de[Se]?.UOM??" "}`,wrapping:false});Pe.addCell(ke);let He=0;for(let Ue=0;Ue<o.length;Ue++){let Ee=o[Ue].Quantity;let Qe=Ee.replace(/,/g,"");let Re=parseFloat(Qe,10);if(o[Ue].Item_Code==de[Se].Item_Code&&Ee){He=He+Re}}let Me=new sap.m.Text(`${"qty_no"+(Se+1)}`,{text:`${He??" "}`,tooltip:`${He??" "}`,wrapping:false});Pe.addCell(Me)}let we={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0};for(let qe=0;qe<c.getColumns().length;qe++){c.getColumns()[qe].setVisible(true)}for(let We=0;We<c.getItems().length;We++){let Ge=c.getItems()[We].getCells();for(let Je=0;Je<Ge.length;Je++){if(Ge[Je].getText().trim()==""){we[Je]+=1}}}for(let ze in we){if(we[ze]==c.getItems().length){c.getColumns()[ze].setVisible(false)}}var u=p.getItems()[1].getContent()[0];u.destroyItems();let Ce=new Set;let _e=0;for(let Xe=0;Xe<r.length;Xe++){const Ye=r[Xe].vendor_code;if(Ce.has(Ye)){continue}Ce.add(Ye);u.addItem(new sap.m.VBox(`${"sectionvbox"+(Xe+1)}`));let Ke=u.getItems()[_e];_e++;Ke.addStyleClass("BorderClass");Ke.addItem(new sap.m.VBox(`${"vboxsuppnameloc"+(Xe+1)}`));Ke.addItem(new sap.m.HBox(`${"hbmiddlesection"+(Xe+1)}`));Ke.addItem(new sap.m.VBox(`${"vbox_last_section"+(Xe+1)}`));Ke.getItems()[0].addStyleClass("stickyright");var I=Ke.getItems()[2];var w=new sap.m.ComboBox(`${"combobox"+(Xe+1)}`,{change:function(e){for(let t=0;t<e.getSource().getParent().getItems()[1].getItems().length;t++){if(e.getSource().getItems()[t].getText()==e.getSource().getValue()){e.getSource().getParent().getItems()[1].getItems()[t].setVisible(true)}else{e.getSource().getParent().getItems()[1].getItems()[t].setVisible(false)}}}});I.addItem(w);var C=new sap.m.HBox(`${"hboxcombo"+(Xe+1)}`);I.addItem(C);var _=I.getItems()[1];let Ze=Ke.getItems()[0];Ze.addStyleClass("alignmentVendorClass");let et=r[Xe]?.Vendor_Name??" ";let tt;if(et.length>20){tt=et.substring(0,15)+"...";console.log(tt)}else{tt=r[Xe]?.Vendor_Name}Ze.addItem(new sap.m.Title(`${"SupplierName"+(Xe+1)}`,{text:`${tt??" "}`,wrapping:true,tooltip:`${r[Xe].Vendor_Name?r[Xe].Vendor_Name:" "}`}));Ze.getItems()[0].addStyleClass("vendorTitle");Ze.addItem(new sap.m.Title(`${"SupplierLocation"+(Xe+1)}`,{text:`${r[Xe].Vendor_Location?r[Xe].Vendor_Location:" "}`}));console.log(r);Ze.getItems()[1].addStyleClass("titleStyleClass");Ze.addStyleClass("v11spaceBetweenclass");var $=Ke.getItems()[1];$.addStyleClass("alignmentVendorClass");let at=0;let st=0;do{if(r[at].ProjectId==s[1]&&r[at].Proposed_Vendor_Code==r[Xe].Proposed_Vendor_Code){let lt=r[at].PAN_Number;function ot(e){for(let t=0;t<g.length;t++){if(g[t].number===e){return true}}return false}if(ot(lt)){let rt=g.filter(e=>e.number===r[at].PAN_Number);for(let it=0;it<rt.length;it++){$.addItem(new sap.m.VBox(`${"vbmiddlesection"+ne()}`,{}));var f=$.getItems().length;var h=$.getItems()[f-1];h.addStyleClass("customVBox");h.addItem(new sap.m.VBox(`${"vbmiddlesection_innervb"+ne()}`));var v=h.getItems()[0];v.addItem(new sap.m.Text(`${"org_qtn_ref"+ne()}`,{text:`${rt[it]?.number??"NA"}`}));v.addItem(new sap.m.Text(`${"org_date"+ne()}`,{text:`${rt[it]?.date??"NA"}`}));v.addItem(new sap.m.Text(`${"org_validity"+ne()}`,{text:`${r[at]?.validity??"NA"}`}));v.addItem(new sap.m.Text(`${"org_cylindrical_space"+ne()}`,{text:""}));v.addStyleClass("vbmiddlesectionclass");var b=new sap.m.VBox(`${"innervbox"+ne()}`,{alignItems:"Center"});h.addItem(b);let mt=i.find(e=>e.PAN_Number===r[at].PAN_Number);b.addItem(new sap.m.Label(`${"original_offer"+ne()}`,{text:`${rt[it]?.eventNo??" "}`,design:"Bold"}));var y=new sap.m.Table({id:`${"offer"+ne()}`,class:"tableBorder",growing:true,growingThreshold:20,width:"350px",fixedLayout:true});y.addStyleClass("tableBorder");b.addItem(y);var T=new sap.m.Column({id:`${"unit_rate"+ne()}`,header:new sap.m.Label({text:"Unit Price",design:"Bold",wrapping:false}),width:"100px"});var S=new sap.m.Column({id:`${"unit_rate_per"+ne()}`,header:new sap.m.Label({text:"Quantity",design:"Bold",wrapping:true}),width:"70px"});var P=new sap.m.Column({id:`${"total_amt_offer"+ne()}`,header:new sap.m.HBox,width:"140px"});y.addColumn(T);y.addColumn(S);y.addColumn(P);var V=y.getColumns()[2].getHeader();V.addItem(new sap.m.Label({text:"Total Amount",design:"Bold"}));var N=[];var B=0;var L="";let dt=0;let gt=new Set;const pt=o.filter(e=>e.PAN_Number===r[at].PAN_Number&&e.Proposed_Vendor_Code===r[at].Proposed_Vendor_Code);let ct=0;let xt="";function ut(e,t){let a="";switch(t){case"INR":a+=parseFloat(e).toLocaleString("en-IN",{maximumFractionDigits:2});break;default:a+=parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:2});break}return a}const It=m.filter(e=>e.PAN_Number===r[at].PAN_Number&&e.Proposed_Vendor_Code===r[at].Proposed_Vendor_Code);L=It[0]?.Order_CurrencyORBid_currency??"NA";var A=false;for(let Ot=0;Ot<de.length;Ot++){const jt=de[Ot];let kt=o.filter(e=>e.ProjectId==s[1]&&e.Proposed_Vendor_Code==r[at].Proposed_Vendor_Code&&e.Item_Code==de[Ot].Item_Code&&e.PAN_Number==lt);let Ht=pt.filter(e=>e.Item_Code===jt.Item_Code);if(Ht&&kt.length){if(kt.length==1){var D=kt[0].Unit_Price?.replace(/,/g,"")??0;var F=kt[0].Quantity?.replace(/,/g,"")??0;let Mt=kt[0].extendedPrice?.replace(/,/g,"")??0;ct=ct+parseFloat(Mt??0);xt=xt+(kt[0]?.Indian_Tax_PER??" ")+"\n";const Ut=Number(D??0)*Number(F??0);const Et=`${Ut} ${kt[0].Unit_Price??" "}`;B+=Ut;const Qt=new sap.m.ColumnListItem({id:`${"item1data"+ne()}`,cells:[new sap.m.Text({text:`${ut(D,L)??" "} ${L}`}),new sap.m.Text({text:`${kt[0].Quantity??" "}`}),new sap.m.Text({text:`${ut(Ut,L)+" "+L}`})],visible:true});y.addItem(Qt)}else{for(let Rt=0;Rt<kt.length;Rt++){var D=kt[Rt].Unit_Price?.replace(/,/g,"")??0;var F=kt[Rt].Quantity?.replace(/,/g,"")??0;let qt=kt[Rt].extendedPrice?.replace(/,/g,"")??0;ct=ct+parseFloat(qt??0);xt=xt+(kt[0]?.Indian_Tax_PER??" ")+"\n";const Wt=Number(D??0)*Number(F??0);const Gt=`${Wt} ${kt[0].Unit_Price??" "}`;B+=Wt;if(Rt==0){let Jt=[];let zt=new sap.m.Label({text:`Unit Rate`,design:"Bold"});zt.addStyleClass("labelColorClass");let Xt=new sap.m.Label({text:`Quantity`,design:"Bold"});Xt.addStyleClass("labelColorClass");let Yt=new sap.m.Label({text:`Total Amount`,design:"Bold"});Yt.addStyleClass("labelColorClass");let Kt=[];Kt.push(zt);Kt.push(Xt);Kt.push(Yt);let Zt=new sap.m.HBox({justifyContent:"SpaceBetween",alignContent:"SpaceBetween",items:Kt});Zt.addStyleClass("hboxPopoverClass");Jt.push(Zt);var O=[];for(let ta=1;ta<kt.length;ta++){var D=kt[ta].Unit_Price?.replace(/,/g,"")??0;var F=kt[ta].Quantity?.replace(/,/g,"")??0;let aa=kt[ta].extendedPrice?.replace(/,/g,"")??0;ct=ct+parseFloat(aa??0);xt=xt+(kt[ta]?.Indian_Tax_PER??" ")+"\n";const sa=Number(D??0)*Number(F??0);const na=`${sa} ${kt[ta].Unit_Price??" "}`;B+=sa;let la=new sap.m.HBox({justifyContent:"SpaceBetween",alignContent:"SpaceBetween",items:[new sap.m.Text({text:`${ut(D,L)??" "} ${L}`}),new sap.m.Text({text:`${kt[ta].Quantity??" "}`}),new sap.m.Text({text:`${ut(sa,L)+" "+L}`})]});O.push({vendorcode:tt,unit_rate:`${ut(D,L)??" "} ${L}`,quantity:`${kt[ta].Quantity??" "}`,total:`${ut(sa,L)+" "+L}`});la.addStyleClass("hboxPopoverClass");Jt.push(la)}var j=this.base.getExtensionAPI().getModel();var k=j.bindContext("/storeVendorDetails(...)");var H=JSON.stringify(O);k.setParameter("result",H);await k.execute();const ea=new sap.m.ColumnListItem({id:`${"item1data"+ne()}`,cells:[new sap.m.Text({text:`${ut(D,L)??" "} ${L}`}),new sap.m.Text({text:`${kt[Rt].Quantity??" "}`}),new sap.m.HBox({items:[new sap.m.Text({text:`${ut(Wt,L)+" "+L} ⠀`}),new sap.ui.core.Icon({src:"sap-icon://overflow",activeColor:"black",color:"black",press:function(e){debugger;let t=new sap.m.Popover({showHeader:false,placement:sap.m.PlacementType.Bottom,content:Jt});if(e.getSource().getParent().getParent().getTable().getColumns()[2].getStyleClass()=="columnStyleClass"){t.addStyleClass("PopOverClassBox")}t.openBy(e.getSource())}})]})],visible:true});y.addItem(ea);break}}}}else{const oa=new sap.m.ColumnListItem({id:`${"item1data"+ne()}`,cells:[new sap.m.Text({text:""}),new sap.m.Text({text:""}),new sap.m.Text({text:""})]});y.addItem(oa)}}const wt=d.filter(e=>e.PAN_Number===r[at].PAN_Number&&e.Proposed_Vendor_Code===r[at].Proposed_Vendor_Code);let Ct={};const _t=["Spares for 2 Years operation","Packing, Marking, Forwarding & Freight","Inspection / Testing Charges","Documentation Charges","RNOD","Custom Duty & Cess","SGST","IGST","UGST","Shipment charges from EXW to ISRO Mahendragiri","Per Diem rate for Supervision for Erection and commissioning","PriceBasis","Point of Delivery","Delivery Period","Payment Terms","Liquidated Damages","Warranty / Defect Liability Period","CPBG","Contact Person","Contact No.","Order can be given to","Techncially Approved","Approved Vendor","Freight","Inspection Value","Document Value"];for(let ra=0;ra<wt.length;ra++){const ia=wt[ra];if(_t.includes(ia.name)){Ct[ia.name]=ia.value}}var M=new sap.m.ColumnListItem({id:`${"blankspace"+ne()}`,cells:[new sap.m.Text({text:""}),new sap.m.Text({text:""}),new sap.m.Text({text:""})]});y.addItem(M);var U=new sap.m.ColumnListItem({id:`${"spare"+ne()}`,cells:[new sap.m.Text({text:""}),new sap.m.Text({text:""}),new sap.m.Text({text:`${ut(Ct[_t[0]]??0)+" "+L??" "}`})]});let $t=B+(parseFloat(Ct[_t[0]])||0);y.addItem(U);var E=new sap.m.ColumnListItem({id:`${"grandtotal"+ne()}`,cells:[new sap.m.Text({text:""}),new sap.m.Text({text:""}),new sap.m.Label({text:`${ut($t)+" "+L}`,design:"Bold"})]});let ft=ut(Ct[_t[23]])=="NaN"?"0":ut(Ct[_t[23]]);y.addItem(E);var Q=new sap.m.ColumnListItem({id:`${"freight"+ne()}`,visible:false,cells:[new sap.m.Text({text:`${Ct[_t[1]]??" "}`}),new sap.m.Text({text:""}),new sap.m.Text({text:`${ft+" "+L}`})]});y.addItem(Q);var R=new sap.m.ColumnListItem({id:`${"inspection"+ne()}`,visible:false,cells:[new sap.m.Text({text:`${Ct[_t[2]]??" "}`}),new sap.m.Text({text:""}),new sap.m.Text({text:`${Ct[_t[24]]??" "}`})]});y.addItem(R);var q=new sap.m.ColumnListItem({id:`${"documentation"+ne()}`,visible:false,cells:[new sap.m.Text({text:`${Ct[_t[3]]??" "}`}),new sap.m.Text({text:""}),new sap.m.Text({text:`${Ct[_t[25]]??" "}`})]});let ht=$t+(parseInt(Ct[_t[23]])||0)+(parseInt(Ct[_t[24]])||0)+(parseInt(Ct[_t[25]])||0);y.addItem(q);var W=new sap.m.ColumnListItem({id:`${"rnod"+ne()}`,visible:false,cells:[new sap.m.Label({text:`${Ct[_t[4]]??" "}`,design:"Bold"}),new sap.m.Text({text:""}),new sap.m.Text({text:""})]});y.addItem(W);var G=new sap.m.ColumnListItem({id:`${"customduty"+ne()}`,visible:false,cells:[new sap.m.Text({text:`${Ct[_t[5]]??" "}`}),new sap.m.Text({text:""}),new sap.m.Text({text:""})]});y.addItem(G);var J=new sap.m.CustomListItem({id:`${"tax_field"+ne()}`,visible:false,content:[new sap.m.Text({text:xt,width:"294px",height:"40px"})]});y.addItem(J);let vt=(parseFloat(Ct[_t[6]])||0)*ht/100;let bt=(parseFloat(Ct[_t[7]])||0)*ht/100;let yt=(parseFloat(Ct[_t[8]])||0)*ht/100;var z=new sap.m.ColumnListItem({id:`${"shipment"+ne()}`,visible:false,cells:[new sap.m.Text({text:`${Ct[_t[9]]??" "}`}),new sap.m.Text({text:""}),new sap.m.Text({text:""})]});if(!ct){ct=0}let Tt=ht+vt+bt+yt;y.addItem(z);var X=new sap.m.ColumnListItem({id:`${"totalincludingtaxes"+ne()}`,cells:[new sap.m.Text({text:""}),new sap.m.Text({text:""}),new sap.m.Label({text:`${ut(ct??0)+" "+L}`,design:"Bold"})]});y.addItem(X);var X=new sap.m.ColumnListItem({id:`${"total_excluding_taxes"+ne()}`,cells:[new sap.m.Text({text:""}),new sap.m.Text({text:""}),new sap.m.Label({text:`${ut(ct)+" "+L}`,design:"Bold"})]});y.addItem(X);var Y=new sap.m.ColumnListItem({id:`${"perdiemrate"+ne()}`,cells:[new sap.m.Text({text:`${Ct[_t[10]]??" "}`}),new sap.m.Text({text:""}),new sap.m.Text({text:""})]});y.addItem(Y);if(r[at].Rank=="1"){y.getColumns()[0].setStyleClass("columnStyleClass");y.getColumns()[1].setStyleClass("columnStyleClass");y.getColumns()[2].setStyleClass("columnStyleClass");y.getItems()[y.getItems().length-5].addStyleClass("customColumnList")}y.getItems()[y.getItems().length-5].addStyleClass("taxCell");let St=y.getItems()[y.getItems().length-5].getContent()[0].addStyleClass("taxTextClass");var K=I.getItems()[0];var Z=new sap.ui.core.Item(`${"item1"+ne()}`,{text:`${rt[it].eventNo??" "}`});K.addItem(Z);K.setValue(`${rt[it].eventNo??""}`);_.addItem(new sap.m.VBox(`${"offer"+ne()}`));var ee=_.getItems()[st];st++;ee.addStyleClass("spacebetweenclass");ee.addItem(new sap.m.ScrollContainer(`${"deliveryperiodScroll"+ne()}`,{vertical:true,width:"350px",height:"100px"}));ee.getItems()[0].addContent(new sap.m.Text(`${"Scopedeliveryperiod"+ne()}`,{text:`${It[0]?.Scope_and_Responsibilities??" "}`}));ee.addItem(new sap.m.ScrollContainer(`${"CommercialpaymenttermsScroll"+ne()}`,{vertical:true,height:"100px"}));ee.getItems()[1].addContent(new sap.m.Text(`${"Compliancepaymentterms"+ne()}`,{text:`${It[0]?.Commercial_Terms??" "}`}));ee.addItem(new sap.m.ScrollContainer(`${"OthersliquidedScroll"+ne()}`,{vertical:true,height:"100px"}));ee.getItems()[2].addContent(new sap.m.Text(`${"Othersliquided"+ne()}`,{text:`${It[0]?.Compliance_Terms??" "}`}));ee.addItem(new sap.m.ScrollContainer(`${"warrantyScroll"+ne()}`,{vertical:true,height:"100px"}));ee.getItems()[3].addContent(new sap.m.Text(`${"warranty"+ne()}`,{text:`${It[0]?.Others??" "}`}));const Pt=It[0]?.Vendor_Contact_PersonDASH1??"";if(Pt){var te=/name\s*:(.*?)\s*email/;var ae=Pt.match(te)}var se=ae?ae[1].trim():null;ee.addItem(new sap.m.Text(`${"contactperson"+ne()}`,{text:`${It[0]?.Vendor_Contact_PersonDASH1??" "}`}));const Vt=/ph1\s*:\s*(.*?)\s*ph2/;const Nt=Pt.match(Vt);let Bt=Nt?Nt[1].trim():null;const Lt=/ph2\s*:\s*(.*?)$/;const At=Pt.match(Lt);let Dt=At?At[1].trim():null;if(Bt==null){Bt=" "}if(Dt==null){Dt=" "}ee.addItem(new sap.m.Text(`${"contactno"+ne()}`,{text:`${Bt+" "+Dt??" "}`}));ee.addItem(new sap.m.Text(`${"ordercanbe"+ne()}`,{text:`${Ct["Order can be give to"]??" "}`}));ee.addItem(new sap.m.Text(`${"technicallyapproved"+ne()}`,{text:`${r[at].Technically_Approved??" "}`}));ee.addItem(new sap.m.Text(`${"approvedvendor"+ne()}`,{text:`${r[at].Awarded_Vendor??" "}`}));let Ft=ee.getItems()[ee.getItems().length-1];Ft.addStyleClass("customlaststyleclassrsection")}}}at++}while(at<r.length);for(let ma=0;ma<$.getItems().length-1;ma++){$.getItems()[ma].setVisible(false);$.getParent().getItems()[2].getItems()[1].getItems()[ma].setVisible(false)}let nt=$?.getItems()[$?.getItems().length-1];if(nt){nt.getItems()[1].getItems()[1].getColumns()[2].getHeader().addItem(new sap.ui.core.Icon(`${"total_amount_icon"+ne()}`,{src:"sap-icon://expand",color:"darkblue",hoverColor:"red",activeColor:"darkgreen",size:"12px",width:"20px",press:function(e){var a=e.getSource().getParent().getParent().getParent().getParent().getParent().getParent().getItems();if(a.length==1){t.show("No More Status")}else{for(let t=0;t<a.length-1;t++){if(a[t].getVisible()==true){a[t].setVisible(false);e.getSource().setSrc("sap-icon://expand")}else{a[t].setVisible(true);e.getSource().setSrc("sap-icon://collapse")}}}}}))}}sap.ui.core.BusyIndicator.hide();let $e=p.getItems()[0].getItems()[2].getItems()[0];let fe=p.getItems()[1].getContent()[0].getItems();for(let da=0;da<fe.length;da++){let ga=fe[da].getItems()[1].getItems();for(let pa=0;pa<ga.length;pa++){let ca=ga[pa].getItems()[1].getItems()[1].getItems();for(let xa=0;xa<ca.length;xa++){if(ca[xa].getMetadata()._sClassName!="sap.m.CustomListItem"){let ua=ca[xa].getCells()[2];if(Object.keys(ua.mAggregations).length!=0){debugger}}}}}let he=p.getItems()[0].getItems()[3].getItems();for(let Ia=2;Ia<=8;Ia++){he[Ia].setVisible(false)}for(let wa=13;wa<he.length;wa++){he[wa].setVisible(false)}if(he[9].getItems()[1].getSrc()=="sap-icon://navigation-up-arrow"){he[9].getItems()[1].setSrc("sap-icon://navigation-right-arrow")}if(he[12].getItems()[1].getSrc()=="sap-icon://navigation-down-arrow"){he[12].getItems()[1].setSrc("sap-icon://navigation-right-arrow")}let ve=sap.ui.getCore().byId("cbedcompdbdyn::Project_DetailsObjectPage--fe::HeaderFacetCustomContainer::HeaderFragment--rowexpand");let be=p.getItems()[1].getContent()[0].getItems();for(let Ca=0;Ca<be.length;Ca++){be[Ca].getItems()[2].setVisible(false)}}catch(_a){t.show(_a)}}}}})});